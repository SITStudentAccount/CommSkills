<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CommSkills</title>
<head>
		
      <!-- Load Roboto font
      <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'> 
	  -->
      <!-- Load css styles -->
      <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap.css" />
      <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap-responsive.css" />
      <link rel="stylesheet" type="text/css" href="stylesheets/style-side.css" />
	  <link rel="stylesheet" type="text/css" href="stylesheets/firebasechat.css" />
      <link rel="stylesheet" type="text/css" href="stylesheets/pluton.css" />
	  <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
      <!--[if IE 7]>
      //<link rel="stylesheet" type="text/css" href="stylesheets/pluton-ie7.css" />
      <![endif]-->
      <link rel="stylesheet" type="text/css" href="stylesheets/jquery.cslider.css" />
      <link rel="stylesheet" type="text/css" href="stylesheets/jquery.bxslider.css" />
      <link rel="stylesheet" type="text/css" href="stylesheets/animate.css" />
      <!-- Fav and touch icons -->
      <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/ico/apple-touch-icon-144.png">
      <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/ico/apple-touch-icon-114.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/apple-touch-icon-72.png">
      <link rel="apple-touch-icon-precomposed" href="images/ico/apple-touch-icon-57.png">
      <link rel="shortcut icon" href="images/ico/favicon.ico">
	  

	  <!-- jQuery -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

		<!-- Firebase -->
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>

		<!-- Firechat -->
		<link rel="stylesheet" href="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.css" />
		<script src="https://cdn.firebase.com/libs/firechat/3.0.1/firechat.min.js"></script>
		
		
		<!--<script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>-->
		
		<!----webfonts---->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
		<!----//webfonts---->
	  

</head>


<body data-spy="scroll" data-target="#navbar-example">

      <div class="navbar">
         <div class="navbar-inner">
            <div class="container">
               <a href="#" class="brand">
                  <IMG src="images/logo.png" width="90" height="30" alt="Logo" />
                  <!-- This is website logo -->
               </a>
               <!-- Navigation button, visible on small resolution -->
               <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
               <i class="icon-menu"></i>
               </button>
               <!-- Main navigation 
			   
				
               <!-- End main navigation -->
            </div>
         </div>
      </div>
	<div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header" style="margin-top:50px;">
		<div class="mdl-layout__content mdl-color--grey-100">
		  <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">

			<!-- Container for the demo -->
			<div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
			  <div class="mdl-card__title mdl-color--light-blue-600 mdl-color-text--white">
				<h2 class="mdl-card__title-text">Upload your Content</h2>
			  </div>
			  <div class="mdl-card__supporting-text mdl-color-text--grey-600" id="messagesDiv">
				<p>Select a file below. When it is uploaded, a link will be displayed to the uploaded file.</p>
				<h6>Choose File</h6>
				<input type="file" id="file" name="file"/>
				<h6>File URL:</h6>
				<span id="linkbox"></span>
			  </div>
			</div>
		  </div>
		</div>
	</div>
	<script>
  var config = {
		apiKey: "AIzaSyDOl9P1XEPMvI4bUAtm9A8S34m9upfUZIo",
		authDomain: "ict3001-bb85a.firebaseapp.com",
		databaseURL: "https://ict3001-bb85a.firebaseio.com",
		storageBucket: "ict3001-bb85a.appspot.com",
		messagingSenderId: "597329719830"
	};
	firebase.initializeApp(config);
					  
    var auth = firebase.auth();
    var storageRef = firebase.storage().ref();
    function handleFileSelect(evt) {
      evt.stopPropagation();
      evt.preventDefault();
      var file = evt.target.files[0];
	  var rating={asd:0};
      var metadata = {
        'contentType': file.type,
		'rating':0
      };
	
      // Push to child path.
	  
      // [START oncomplete]
      storageRef.child('images/' + file.name).put(file, metadata).then(function(snapshot) {
        console.log('Uploaded', snapshot.totalBytes, 'bytes.');
        console.log(snapshot.metadata);
        var url = snapshot.metadata.downloadURLs[0];
        console.log('File available at', url);
        // [START_EXCLUDE]
		var div = document.createElement("div")
		div.append('<img src="https://firebasestorage.googleapis.com/v0/b/ict3001-bb85a.appspot.com/o/images%2FChain.jpg?alt=media&amp;token=9c79129a-2be5-48bd-9635-c02ef0b88934" width="523" height="327">');
        document.getElementById('linkbox').innerHTML = '<a href="' +  url + '">Click For File</a>';
        // [END_EXCLUDE]
      }).catch(function(error) {
        // [START onfailure]
        console.error('Upload failed:', error);
        // [END onfailure]
      });
      // [END oncomplete]
    }
    window.onload = function() {
      document.getElementById('file').addEventListener('change', handleFileSelect, false);
      document.getElementById('file').disabled = true;
      auth.onAuthStateChanged(function(user) {
        if (user) {
          console.log('Anonymous user signed-in.', user);
          document.getElementById('file').disabled = false;
        } else {
          console.log('There was no anonymous session. Creating a new anonymous user.');
          // Sign the user in anonymously since accessing Storage requires the user to be authorized.
          auth.signInAnonymously();
        }
      });
    }
  </script>
  
  
  <script>
  var tangRef = storageRef.child('images/Chain.jpg');
	tangRef.getDownloadURL().then(function(url)                             {
	  document.querySelector('img').src = url;
	}).catch(function(error) {
	  console.error(error);
	});
  </script>
  
 
<!-- Include javascript -->
      <script src="javascripts/jquery.js"></script>
      <script type="text/javascript" src="javascripts/jquery.mixitup.js"></script>
      <script type="text/javascript" src="javascripts/bootstrap.js"></script>
      <script type="text/javascript" src="javascripts/modernizr.custom.js"></script>
      <script type="text/javascript" src="javascripts/jquery.bxslider.js"></script>
      <script type="text/javascript" src="javascripts/jquery.cslider.js"></script>
      <script type="text/javascript" src="javascripts/jquery.placeholder.js"></script>
      <script type="text/javascript" src="javascripts/jquery.inview.js"></script>
      <!-- css3-mediaqueries.js for IE8 or older -->
      <!--[if lt IE 9]>
      <script src="javascripts/respond.min.js"></script>
      <![endif]-->
	  <script type="text/javascript" src="javascripts/facialexpressionchat.js"></script>
</body>
</html>
